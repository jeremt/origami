// ┌───────────────────────────────────────────────────────────────────────┐
// │ Origami - Make pretty 'folding' animations using suites or equations. │
// ├───────────────────────────────────────────────────────────────────────┤
// │ Created by Jeremie T. Under MIT License.                              │
// └───────────────────────────────────────────────────────────────────────┘
(function(c){var a=document.createElement("div");var b=(function(){var f=/^(Moz|(w|W)ebkit|O|ms)(?=[A-Z])/,e="";for(var g in a.style){if(f.test(g)){e=g.match(f)[0]}}return"-"+e.toLowerCase()+"-"})();var d=function(f){for(var e in f){f[b+e]=f[e]}return f};c.fn.origami=function(e){var q=c(this),f=q.children("img").attr("src"),h="",m,s=(q.outerWidth()-q.width())>>1;this.enabled=b+"Perspective" in a.style;e.frags||(e.frags=5);for(m=1;m<=e.frags;m++){h+='<div class="fragment frag'+m+'">'}for(m=1;m<=e.frags;m++){h+="</div>"}q.find("img").remove().end().append(c(h)).find(".fragment").css("background-image","url("+f+")").prepend(c('<span class="overlay" ></span>'));var j=q.find(".back"),p=q.find(".fragment"),l=q.find(".overlay");q.css({width:e.width,height:e.height});j.css({height:q.height(),position:"absolute",right:s,"z-index":0});var t=q.width()/e.frags;p.css("width",t+1);p.each(function(i,v){c(v).css({"background-position":"-"+t*i+"px 0px","transform-style":"preserve-3d","transform-origin":"left center",transition:"translate3d("+t+"px, 0, 0)"})});p.not(".frag1").css(d({transform:"translate3d("+t+"px, 0, 0)"}));l.css({width:t,opacity:0});l.css(d({transition:"opacity "+(e.delay||42)/100+"s ease-in-out"}));if(e.shadows){var r=function(w,v){var i="";i+="linear-gradient(right,rgba(0, 0, 0, "+w+") 0%,";i+="rgba(0, 0, 0, "+v+") 100%)";return b+i};var k=function(w,y){var v,x,z;v=[];for(x=0;x<w.length;x++){z=(w[x]-0.5)*y+0.5;if(z<0){z=0}else{if(z>1){z=1}}v.push(z)}return v}}if(e.f){var u=(function(){var v=[],i;for(i=0;i<e.frags;i++){v.push(e.f(i))}return v})()}else{if(e.suite){var u=(function(){var v=[],i,w=function(x){return e.suite.type==="geo"?x*=e.suite.pas:x+=e.suite.pas};for(i=0,n=e.suite.n;i<e.frags;i++,n=w(n)){v.push(n)}return v})()}else{throw new TypeError("Suite or Equation are required.")}}var o=function(){var A="translate3d("+(t-1)+"px,0,0)",w;p.each(function(B,C){w="rotate3d(0,1,0,"+-(u[B]-(u[B-1]||0))+"deg)";if(B){w=A+" "+w}c(C).css(d({transform:w,"transition-delay":(e.frags-B-1)*(e.delay||42)+"ms"}))});if(!e.shadows){return}var v=[],z,y=0.6;for(var x=0;u[x];x++){v.push(1-(((u[x]+180)/360)%1))}v=k(v,2);l.each(function(C,B){z=v[C];c(B).css({background:r(z,y),opacity:1});y=z})};var g=function(){var v="translate3d("+t+"px,0,0)",i;p.each(function(w,x){i="rotate3d(0,1,0,0deg)";if(w){i=v+" "+i}c(x).css(d({transform:i}))});if(e.shadows){l.css({opacity:"0"})}};q.hover(o,g);q.addClass("foldable")}})(jQuery);