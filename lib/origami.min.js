// ┌───────────────────────────────────────────────────────────────────────┐
// │ Origami - Make pretty 'folding' animations using suites or equations. │
// ├───────────────────────────────────────────────────────────────────────┤
// │ Created by Jeremie T. Under MIT License.                              │
// └───────────────────────────────────────────────────────────────────────┘
(function(c){var a=document.createElement("div");var b=(function(){var f=/^(Moz|(w|W)ebkit|O|ms)(?=[A-Z])/,e="";for(var g in a.style){if(f.test(g)){e=g.match(f)[0]}}return"-"+e.toLowerCase()+"-"})();var d=function(f){for(var e in f){f[b+e]=f[e]}return f};c.fn.origami=function(e){var p=c(this),f=p.children("img").attr("src"),h="",l,q=(p.outerWidth()-p.width())>>1;this.enabled=b+"Perspective" in a.style;e.frags||(e.frags=5);for(l=1;l<=e.frags;l++){h+='<div class="fragment frag'+l+'">'}for(l=1;l<=e.frags;l++){h+="</div>"}p.find("img").remove().end().append(c(h)).find(".fragment").css("background-image","url("+f+")").prepend(c('<span class="overlay" ></span>'));var j=p.find(".back"),o=p.find(".fragment"),k=p.find(".overlay");p.css({width:e.width,height:e.height});j.css({height:p.height(),position:"absolute",right:q,"z-index":0});var r=p.width()/e.frags;o.css("width",r+1);o.each(function(i,t){c(t).css({"background-position":"-"+r*i+"px 0px","transform-style":"preserve-3d","transform-origin":"left center",transition:"translate3d("+r+"px, 0, 0)"})});o.not(".frag1").css(d({transform:"translate3d("+r+"px, 0, 0)"}));k.css({opacity:0,position:"absolute"});c(k.selector+":hover").css({opacity:1});if(e.f){var s=(function(){var t=[],i;for(i=0;i<e.frags;i++){t.push(e.f(i))}return t})()}else{if(e.suite){var s=(function(){var t=[],i,u=function(v){return e.suite.type==="geo"?v*=e.suite.pas:v+=e.suite.pas};for(i=0,n=e.suite.n;i<e.frags;i++,n=u(n)){t.push(n)}return t})()}else{throw new TypeError("Suite or Equation are required.")}}var m=function(){var t="translate3d("+(r-1)+"px,0,0)",i;o.each(function(u,v){i="rotate3d(0,1,0,"+-(s[u]-(s[u-1]||0))+"deg)";if(u){i=t+" "+i}c(v).css(d({transform:i,"transition-delay":(e.frags-u-1)*50+"ms"}))})};var g=function(){var t="translate3d("+r+"px,0,0)",i;o.each(function(u,v){i="rotate3d(0,1,0,0deg)";if(u){i=t+" "+i}c(v).css(d({transform:i}))})};p.hover(m,g);p.addClass("foldable")}})(jQuery);