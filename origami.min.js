// ┌───────────────────────────────────────────────────────────────────────┐
// │ Origami - Make pretty 'folding' animations using suites or equations. │
// ├───────────────────────────────────────────────────────────────────────┤
// │ Created by Jeremie T. Under MIT License.                              │
// └───────────────────────────────────────────────────────────────────────┘
~function(c){var b=(function(){var f=/^(Moz|(w|W)ebkit|O|ms)(?=[A-Z])/;for(var g in document.body.style){if(f.test(g)){return g.match(f)[0].toLowerCase()}}return""})();function e(g){for(var f in g){g["-"+b+"-"+f]=g[f]}return g}function d(h,g){var f="";f+="linear-gradient(right,rgba(0, 0, 0, "+h+") 0%,";f+="rgba(0, 0, 0, "+g+") 100%)";return"-"+b+"-"+f}function a(g,j){var f,h,k;f=[];for(h=0;h<g.length;h++){k=(g[h]-0.5)*j+0.5;if(k<0){k=0}else{if(k>1){k=1}}f.push(k)}return f}c.fn.origami=function(h,f){var i=c(this),g=i.children("img");g.load(function(){var j=g.attr("src"),k=g[0].naturalWidth,t=g[0].naturalHeight,m="";h.frags||(h.frags=5);var o;for(o=1;o<=h.frags;o++){m+='<div class="fragment frag'+o+'">'}for(o=1;o<=h.frags;o++){m+="</div>"}g.hide().end().append(c(m)).find(".fragment").css("background-image","url("+j+")").prepend('<span class="overlay"></span>');var n=i.find(".back"),r=i.find(".fragment"),p=i.find(".overlay");i.css({width:k,height:t});n.css({position:"absolute",right:(i[0].offsetWidth-k)>>1,"max-height":t,"max-width":k,"z-index":0});var s=k/h.frags;r.css("width",s+1);r.each(function(v,w){c(w).css({"background-position":"-"+s*v+"px 0px","transform-style":"preserve-3d","transform-origin":"left center",transition:"translate3d("+s+"px, 0, 0)"})});r.not(".frag1").css(e({transform:"translate3d("+s+"px, 0, 0)"}));p.css({width:s,opacity:0});p.css(e({transition:"opacity "+(h.delay||42)/100+"s ease-in-out"}));if(h.f){var u=(function(){var w=[];for(var v=0;v<h.frags;v++){w.push(h.f(v))}return w})()}else{if(h.suite){var u=(function(){var w=[],y=function(x){return h.suite.type==="geo"?x*=h.suite.pas:x+=h.suite.pas};for(var v=0,z=h.suite.n;v<h.frags;v++,z=y(z)){w.push(z)}return w})()}else{throw new TypeError("Suite or Equation are required.")}}function q(){var B="translate3d("+(s-1)+"px,0,0)",w,x;r.each(function(C,D){w="rotate3d(0,1,0,"+-(u[C]-(u[C-1]||0))+"deg)";x=(h.frags-C-1)*(h.delay||42);if(C){w=B+" "+w}c(D).css(e({transform:w,"transition-delay":x+"ms"}))});if(!h.shadows){return}var v=[],A,z=0.6;for(var y=0;y<u.length;y++){v.push(1-(((u[y]+180)/360)%1))}v=a(v,2);p.each(function(D,C){A=v[D];c(C).css({background:d(A,z),opacity:1});z=A})}function l(){var w="translate3d("+s+"px,0,0)",v;r.each(function(x,y){v="rotate3d(0,1,0,0deg)";if(x){v=w+" "+v}c(y).css(e({transform:v}))});if(h.shadows){p.css({opacity:"0"})}}i.addClass("origami");f({on:q,off:l})})};c.fn.origami.enabled=b+"Perspective" in document.body.style}(typeof jQuery!=="undefined"?jQuery:Zepto);